<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14.02</title>

    <style>
        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Georgia', serif;
            background: radial-gradient(ellipse at bottom, #0a0c18 0%, #000000 100%);
            color: white;
            transition: background 2s ease;
        }

        /* üåå —Å–ª–æ–π –∑–≤—ë–∑–¥ */
        #starfield {
            position: fixed;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
            z-index: 0;
            transition: transform 0.2s ease-out;
        }

        

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle linear infinite;
            transition: transform 0.4s ease-out;

        }

        @keyframes twinkle {
            0% {
                opacity: 0.2;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.2;
            }
        }

        /* üå† –ø–∞–¥–∞—é—â–∞—è –∑–≤–µ–∑–¥–∞ */
        .shooting-star {
    position: fixed;
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 12px white, 0 0 25px white;
    z-index: 1;
}

.shooting-star::after {
    content: "";
    position: absolute;
    width: 120px;
    height: 2px;
    top: 50%;
    left: -120px;
    transform: translateY(-50%);
    background: linear-gradient(
        to right,
        rgba(255,255,255,0.8),
        rgba(255,255,255,0)
    );
}


        .container {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .text {
            font-size: 9vw;
            min-height: 15vh;
        }

        .glow {
            color: #ffd1f0;
            text-shadow:
                0 0 20px #ff6bb5,
                0 0 40px #ff1493,
                0 0 80px #ff1493;
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0% {
                text-shadow: 0 0 20px #ff6bb5;
            }

            50% {
                text-shadow: 0 0 60px #ff1493;
            }

            100% {
                text-shadow: 0 0 20px #ff6bb5;
            }
        }

        .heart {
            display: block;
            font-size: 22vw;
            margin-top: 20px;
            opacity: 0;
            animation: beat 1s infinite;
            filter: drop-shadow(0 0 25px #ff4da6);
        }

        @keyframes beat {
            0% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.35);
            }

            30% {
                transform: scale(1);
            }

            45% {
                transform: scale(1.25);
            }

            60% {
                transform: scale(1);
            }

            100% {
                transform: scale(1);
            }
        }

        .start-screen {
            position: absolute;
            font-size: 5vw;
            opacity: 0.8;
            cursor: pointer;
            z-index: 3;
        }

        #starfield-back,
        #starfield-front {
            position: fixed;
            width: 200%;
            height: 120%;
            top: -10%;
            left: 0;
            z-index: 0;
        }

        #starfield-front {
            z-index: 1;
        }

    </style>
</head>

<body>

    <div id="starfield-back"></div>
    <div id="starfield-front"></div>


    <div class="start-screen" onclick="startExperience()">
        –Ω–∞–∂–º–∏, –µ—Å–ª–∏ –≥–æ—Ç–æ–≤ üí´
    </div>

    <div class="container" id="main" style="display:none;">
        <div id="text" class="text"></div>
        <span id="heart" class="heart">üíó</span>
    </div>

    <audio id="spaceSound" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4a8d8c7b91.mp3">
    </audio>

    <audio id="typeSound1">
        <source src="https://www.soundjay.com/mechanical/sounds/typewriter-key-1.mp3">
    </audio>

    <audio id="typeSound2">
        <source src="https://www.soundjay.com/mechanical/sounds/typewriter-key-2.mp3">
    </audio>

    <script>

        const textElement = document.getElementById("text");
            const heart = document.getElementById("heart");
            const starfield = document.getElementById("starfield");
            const spaceSound = document.getElementById("spaceSound");
            const typeSound1 = document.getElementById("typeSound1");
            const typeSound2 = document.getElementById("typeSound2");

            const messages = [
                "–°–∞–∞–∞–∞—à",
                "–∞ –∑–Ω–∞–µ—à—å —á—Ç–æ–æ–æ?",
                "—Ç—ã –º–Ω–µ –Ω—Ä–∞–≤–∏—à—å—Å—è"
            ];

            let messageIndex = 0;
            let charIndex = 0;
            let soundToggle = true;

            /* ‚≠ê —Å–æ–∑–¥–∞—ë–º –∑–≤—ë–∑–¥—ã */
            const starfieldBack = document.getElementById("starfield-back");
                const starfieldFront = document.getElementById("starfield-front");

                function createStars() {

                    // –¥–∞–ª—å–Ω–∏–π —Å–ª–æ–π
                    for (let i = 0; i < 140; i++) {
                        const star = document.createElement("div");
                        star.classList.add("star");

                        const size = Math.random() * 2 + 0.5;

                        star.style.width = size + "px";
                        star.style.height = size + "px";
                        star.style.left = Math.random() * 200 + "vw";
                        star.style.top = Math.random() * 100 + "vh";
                        star.style.animationDuration = (Math.random() * 3 + 2) + "s";

                        starfieldBack.appendChild(star);
                    }

                    // –±–ª–∏–∂–Ω–∏–π —Å–ª–æ–π
                    for (let i = 0; i < 60; i++) {
                        const star = document.createElement("div");
                        star.classList.add("star");

                        const size = Math.random() * 3 + 1.5;

                        star.style.width = size + "px";
                        star.style.height = size + "px";
                        star.style.left = Math.random() * 200 + "vw";
                        star.style.top = Math.random() * 100 + "vh";
                        star.style.animationDuration = (Math.random() * 2 + 1) + "s";

                        starfieldFront.appendChild(star);
                    }
                }


            createStars();

            /* üåå –ü–ª–∞–≤–Ω—ã–π –¥—Ä–µ–π—Ñ */
            let driftX = 0;
            let driftY = 0;
            let parallaxX = 0;
            let parallaxY = 0;

            let driftBack = 0;
                let driftFront = 0;

                function driftSpace() {

                    driftBack -= 0.04;   // –¥–∞–ª—å–Ω–∏–π —Å–ª–æ–π ‚Äî –º–µ–¥–ª–µ–Ω–Ω–µ–µ
                    driftFront -= 0.08;  // –±–ª–∏–∂–Ω–∏–π —Å–ª–æ–π ‚Äî –±—ã—Å—Ç—Ä–µ–µ

                    if (driftBack <= -100) driftBack = 0;
                    if (driftFront <= -100) driftFront = 0;

                    starfieldBack.style.transform =
                        `translate(${driftBack + parallaxX}px, ${parallaxY}px)`;

                    starfieldFront.style.transform =
                        `translate(${driftFront + parallaxX * 1.5}px, ${parallaxY}px)`;

                    requestAnimationFrame(driftSpace);
                }


            driftSpace();

            /* üì± –ü–∞—Ä–∞–ª–ª–∞–∫—Å */
            function requestGyroPermission() {

                function handleOrientation(event) {
                    parallaxX = event.gamma * 0.3;
                    parallaxY = event.beta * 0.2;
                }

                if (typeof DeviceOrientationEvent !== "undefined" &&
                    typeof DeviceOrientationEvent.requestPermission === "function") {

                    DeviceOrientationEvent.requestPermission()
                        .then(response => {
                            if (response === "granted") {
                                window.addEventListener("deviceorientation", handleOrientation);
                            }
                        })
                        .catch(() => { });

                } else {
                    window.addEventListener("deviceorientation", handleOrientation);
                }
            }

            /* üöÄ –°—Ç–∞—Ä—Ç */
            function startExperience() {

                document.querySelector(".start-screen").style.display = "none";
                document.getElementById("main").style.display = "block";

                spaceSound.volume = 0.15;
                spaceSound.play().catch(() => { });

                requestGyroPermission();

                typeWriter();
            }

            /* ‚å® –ø–µ—á–∞—Ç–Ω–∞—è –º–∞—à–∏–Ω–∫–∞ */
            function typeWriter() {
                if (charIndex < messages[messageIndex].length) {

                    textElement.innerHTML += messages[messageIndex].charAt(charIndex);

                    if (soundToggle) {
                        typeSound1.currentTime = 0;
                        typeSound1.play().catch(() => { });
                    } else {
                        typeSound2.currentTime = 0;
                        typeSound2.play().catch(() => { });
                    }

                    soundToggle = !soundToggle;
                    charIndex++;

                    setTimeout(typeWriter, 90);

                } else {
                    setTimeout(nextMessage, 1500);
                }
            }

            function nextMessage() {
                if (messageIndex < messages.length - 1) {

                    textElement.innerHTML = "";
                    messageIndex++;
                    charIndex = 0;
                    typeWriter();

                } else {

                    document.body.style.background =
                        "radial-gradient(ellipse at bottom, #2b0f2f 0%, #000000 100%)";

                    textElement.classList.add("glow");
                    heart.style.opacity = "1";

                    startStarfall();
                    startHeartbeatVibration();
                }
            }

            /* üå† –∑–≤–µ–∑–¥–æ–ø–∞–¥ */
            function startStarfall() {
                for (let i = 0; i < 6; i++) {
                    setTimeout(() => createShootingStar(), i * 300);
                }
            }

            function createShootingStar() {

                const star = document.createElement("div");
                star.classList.add("shooting-star");

                const startY = Math.random() * 40;
                star.style.top = startY + "vh";
                star.style.left = "-10vw";

                document.body.appendChild(star);

                const deltaX = window.innerWidth * 1.2;
                const deltaY = window.innerHeight * 0.4;

                const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);

                star.animate([
                    { transform: `translate(0,0) rotate(${angle}deg)` },
                    { transform: `translate(${deltaX}px, ${deltaY}px) rotate(${angle}deg)` }
                ], {
                    duration: 1200,
                    easing: "ease-out"
                });

                setTimeout(() => star.remove(), 1300);
            }

            /* üíì –≤–∏–±—Ä–∞—Ü–∏—è */
            function startHeartbeatVibration() {
                if ("vibrate" in navigator) {

                    function beat() {
                        navigator.vibrate(120);
                        setTimeout(() => navigator.vibrate(80), 300);
                    }

                    beat();
                    setInterval(beat, 1000);
                }
            }


    </script>

</body>

</html>
