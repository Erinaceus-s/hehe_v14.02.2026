<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14.02</title>

    <style>
        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Georgia', serif;
            background: radial-gradient(ellipse at bottom, #0a0c18 0%, #000000 100%);
            color: white;
            transition: background 2s ease;
        }

        /* üåå —Å–ª–æ–π –∑–≤—ë–∑–¥ */
        #starfield {
            position: fixed;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
            z-index: 0;
            transition: transform 0.2s ease-out;
            animation: slowDrift 60s linear infinite alternate;
        }

        @keyframes slowDrift {
            0% {
                transform: translate(0px, 0px);
            }

            100% {
                transform: translate(-40px, -30px);
            }
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle linear infinite;
            transition: transform 0.4s ease-out;

        }

        @keyframes twinkle {
            0% {
                opacity: 0.2;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.2;
            }
        }

        /* üå† –ø–∞–¥–∞—é—â–∞—è –∑–≤–µ–∑–¥–∞ */
        .shooting-star {
    position: fixed;
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 12px white, 0 0 25px white;
    z-index: 1;
}

.shooting-star::after {
    content: "";
    position: absolute;
    width: 120px;
    height: 2px;
    top: 50%;
    left: -120px;
    transform: translateY(-50%);
    background: linear-gradient(
        to right,
        rgba(255,255,255,0.8),
        rgba(255,255,255,0)
    );
}


        .container {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .text {
            font-size: 9vw;
            min-height: 15vh;
        }

        .glow {
            color: #ffd1f0;
            text-shadow:
                0 0 20px #ff6bb5,
                0 0 40px #ff1493,
                0 0 80px #ff1493;
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0% {
                text-shadow: 0 0 20px #ff6bb5;
            }

            50% {
                text-shadow: 0 0 60px #ff1493;
            }

            100% {
                text-shadow: 0 0 20px #ff6bb5;
            }
        }

        .heart {
            display: block;
            font-size: 22vw;
            margin-top: 20px;
            opacity: 0;
            animation: beat 1s infinite;
            filter: drop-shadow(0 0 25px #ff4da6);
        }

        @keyframes beat {
            0% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.35);
            }

            30% {
                transform: scale(1);
            }

            45% {
                transform: scale(1.25);
            }

            60% {
                transform: scale(1);
            }

            100% {
                transform: scale(1);
            }
        }

        .start-screen {
            position: absolute;
            font-size: 5vw;
            opacity: 0.8;
            cursor: pointer;
            z-index: 3;
        }
    </style>
</head>

<body>

    <div id="starfield"></div>

    <div class="start-screen" onclick="startExperience()">
        –Ω–∞–∂–º–∏, –µ—Å–ª–∏ –≥–æ—Ç–æ–≤ üí´
    </div>

    <div class="container" id="main" style="display:none;">
        <div id="text" class="text"></div>
        <span id="heart" class="heart">üíó</span>
    </div>

    <audio id="spaceSound" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4a8d8c7b91.mp3">
    </audio>

    <audio id="typeSound1">
        <source src="https://www.soundjay.com/mechanical/sounds/typewriter-key-1.mp3">
    </audio>

    <audio id="typeSound2">
        <source src="https://www.soundjay.com/mechanical/sounds/typewriter-key-2.mp3">
    </audio>

    <script>

        const textElement = document.getElementById("text");
        const heart = document.getElementById("heart");
        const starfield = document.getElementById("starfield");
        const spaceSound = document.getElementById("spaceSound");
        const typeSound1 = document.getElementById("typeSound1");
        const typeSound2 = document.getElementById("typeSound2");

        const messages = [
            "–°–∞–∞–∞–∞—à",
            "–∞ –∑–Ω–∞–µ—à—å —á—Ç–æ–æ–æ?",
            "—Ç—ã –º–Ω–µ –Ω—Ä–∞–≤–∏—à—å—Å—è"
        ];

        let messageIndex = 0;
        let charIndex = 0;
        let soundToggle = true;

        // üåå —Å–æ–∑–¥–∞—ë–º –∑–≤—ë–∑–¥—ã
        let stars = [];

            function createStars() {
                for (let i = 0; i < 160; i++) {
                    const star = document.createElement("div");
                    star.classList.add("star");

                    const size = Math.random() * 3 + 1;

                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;

                    star.style.width = size + "px";
                    star.style.height = size + "px";
                    star.style.left = x + "px";
                    star.style.top = y + "px";
                    star.style.animationDuration = (Math.random() * 3 + 2) + "s";

                    starfield.appendChild(star);

                    stars.push({
                        el: star,
                        x: x,
                        y: y,
                        baseX: x,
                        baseY: y
                    });
                }
            }
    function explodeStars(touchX, touchY) {

        stars.forEach(star => {

            const dx = star.x - touchX;
            const dy = star.y - touchY;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 120) {  // —Ä–∞–¥–∏—É—Å —Ä–µ–∞–∫—Ü–∏–∏
                const force = (120 - distance) / 6;

                star.x += dx / distance * force;
                star.y += dy / distance * force;

                star.el.style.transform =
                    `translate(${star.x - star.baseX}px, ${star.y - star.baseY}px)`;
            }
        });

        // –º—è–≥–∫–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ
        setTimeout(() => {
            stars.forEach(star => {
                star.x = star.baseX;
                star.y = star.baseY;
                star.el.style.transform = "translate(0,0)";
            });
        }, 400);
    }

    /* —Å–ª—É—à–∞–µ–º –∫–∞—Å–∞–Ω–∏—è */
    window.addEventListener("touchstart", e => {
        const touch = e.touches[0];
        explodeStars(touch.clientX, touch.clientY);
    });

    window.addEventListener("click", e => {
        explodeStars(e.clientX, e.clientY);
    });


        createStars();

        function startExperience() {
            document.querySelector(".start-screen").style.display = "none";
            document.getElementById("main").style.display = "block";

            spaceSound.volume = 0.15;
            spaceSound.play().catch(() => { });

            requestGyroPermission();
            typeWriter();
        }

        // üì± –ü–ê–†–ê–õ–õ–ê–ö–°
        function requestGyroPermission() {
            if (typeof DeviceOrientationEvent !== "undefined" &&
                typeof DeviceOrientationEvent.requestPermission === "function") {

                DeviceOrientationEvent.requestPermission().then(response => {
                    if (response === "granted") {
                        window.addEventListener("deviceorientation", handleOrientation);
                    }
                }).catch(() => { });
            } else {
                window.addEventListener("deviceorientation", handleOrientation);
            }
        }

        function handleOrientation(event) {
            const x = event.gamma;
            const y = event.beta;

            starfield.style.transform =
                `translate(${x * 0.5}px, ${y * 0.3}px)`;
        }

        // üå† –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤–µ–∑–¥–æ–ø–∞–¥
        function startStarfall() {
            for (let i = 0; i < 6; i++) {
                setTimeout(() => createShootingStar(), i * 300);
            }
        }

        function createShootingStar() {

                const star = document.createElement("div");
                star.classList.add("shooting-star");

                const startY = Math.random() * 40;
                star.style.top = startY + "vh";
                star.style.left = "-10vw";

                document.body.appendChild(star);

                const deltaX = window.innerWidth * 1.2;
                const deltaY = window.innerHeight * 0.4;

                const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);

                star.style.transform = `rotate(${angle}deg)`;

                star.animate([
                    { transform: `translate(0,0) rotate(${angle}deg)` },
                    { transform: `translate(${deltaX}px, ${deltaY}px) rotate(${angle}deg)` }
                ], {
                    duration: 1200,
                    easing: "ease-out"
                });

                setTimeout(() => star.remove(), 1300);
            }


        function typeWriter() {
            if (charIndex < messages[messageIndex].length) {

                textElement.innerHTML += messages[messageIndex].charAt(charIndex);

                if (soundToggle) {
                    typeSound1.currentTime = 0;
                    typeSound1.play().catch(() => { });
                } else {
                    typeSound2.currentTime = 0;
                    typeSound2.play().catch(() => { });
                }

                soundToggle = !soundToggle;
                charIndex++;
                setTimeout(typeWriter, 90);

            } else {
                setTimeout(nextMessage, 1500);
            }
        }

        function nextMessage() {
            if (messageIndex < messages.length - 1) {
                textElement.innerHTML = "";
                messageIndex++;
                charIndex = 0;
                typeWriter();
            } else {
                dramaticFinal();
            }
        }

        function dramaticFinal() {

            document.body.style.background =
                "radial-gradient(ellipse at bottom, #2b0f2f 0%, #000000 100%)";

            textElement.classList.add("glow");
            heart.style.opacity = "1";

            startStarfall();
            startHeartbeatVibration();
        }

        function startHeartbeatVibration() {
            if ("vibrate" in navigator) {
                function beat() {
                    navigator.vibrate(120);
                    setTimeout(() => navigator.vibrate(80), 300);
                }
                beat();
                setInterval(beat, 1000);
            }
        }

    </script>

</body>

</html>
